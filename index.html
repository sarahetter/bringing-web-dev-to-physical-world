<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Bringing Web Development to the Physical World</title>

		<meta name="description" content="A talk. :)">
		<meta name="author" content="Sarah Etter">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/white.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>Bringing Web Development to the Physical World</h1>
					<p>
						<small>by <a href="http://sarahetter.com">Sarah Etter</a> / <a href="http://twitter.com/SarahEtter_">@SarahEtter_</a></small>
					</p>
				</section>

                <section>
                    <h1>Sarah Etter</h1>
                    <br>
                    <a href="http://sarahetter.com">sarahetter.com</a>
                    <br>
                    <a href="http://twitter.com/SarahEtter_">@SarahEtter_</a>
                    <br>
                    <a href="mailto:sarah@sarahetter.com">sarah@sarahetter.com</a>
                    <br><br><br><br>
                    <img src="img/territoriallogo.svg" style="max-width:25%;">

                </section>

                <section>
                    <h2>Arduino</h2>
                    <ul>
                        <li>Microcontroller</li>
                        <li>Open Source</li>
                        <li>C or C++</li>
                        <li>Programmed with Arduino IDE</li>
                        <li>Programs are called “Sketches”</li>
                        <li>Serial Port - generally USB</li>
                        <li>Pins</li>
                        <li>Many different form factors</li>
                    </ul>
                    <aside class="notes">
                        <p>microcontroller - small computer (SoC) on a single integrated circuit containing a processor core, memory, and programmable input/output peripherals</p>

                        <p>Arduino is open source - both hardware AND software.</p>

                        <p>C++ or C - typically you will find examples in C++</p>

                        <p>Pins - many different types of pins.
                        Analog Reference pin - Reference voltage for the analog inputs,
                        Ground,
                        Power,
                        Digital I/O,
                        Analog I/O</p>

                        <p>Pins can be analog or digital, so can accept input from many different types of sensors</p>
                    </aside>
                </section>

                <section>
                    <h2>Form Factors</h2>
                    <img src="img/arduinoUno.jpg">
                    <img src="img/arduinoNano.jpg">

                    <aside class="notes">
                        Reason for different form factors / boards:
                        <ul>
                            <li>Different operating voltage</li>
                            <li>Different number of input/output pins</li>
                            <li>Different SRAM size</li>
                            <li>Different Flash memory size</li>
                            <li>USB connector size (mini, micro, type B, etc)</li>
                        </ul>
                    </aside>
                </section>

                <section>
                    <h2>C++</h2>
                    <ul>
                        <li>Not a big deal!</li>
                        <li>Strongly typed</li>
                        <li>Arduino comes with methods to receive and give info to pins</li>
                    </ul>
                </section>

                <section>
                    <h2>Arduino IDE</h2>
                    <img src="img/emptySketch.png">
                    <aside class="notes">
                        <ul>
                            <li>Checkmark - compiles</li>
                            <li>Arrow - uploads to device by USB</li>
                        </ul>
                    </aside>
                </section>

                <section>
                    <h2>Sketch</h2>
                    <pre><code class="hljs cpp">
void setup() {
// put your setup code here, to run once:

}

void loop() {
// put your main code here, to run repeatedly:

}
                    </code></pre>

                    <aside class="notes">
                        <p>Setup - only happens once, on powering up the arduino, or pressing the “reset” button on the device</p>
                        <p>Loop - Happens over and over forever. Takes the amount of time for your code to run, so if you want to do something a little slower, can add delay function.</p>
                    </aside>
                </section>

                <section>
                    <h2>How to Communicate with Pins</h2>
                    <small>Note: 13 is the pin number</small>
                    <pre><code class="hljs cpp">
int pinNumber = 13;

// set pin mode
pinMode(pinNumber, OUTPUT);
// OR
pinMode(pinNumber, INPUT);

// Read or Write
digitalWrite(pinNumber, HIGH);
digitalRead(pinNumber);

//from 0 - 255
analogWrite(pinNumber, 0);
analogRead(pinNumber);
                    </code></pre>
                </section>

                <section>
                    <h2>Electrical Knowledge</h2>
                    <ul>
                        <li>Create Circuits</li>
                        <li>Most boards are between 2.7 - 12V, so won't kill you under normal circumstances</li>
                        <li>Good Resources
                            <ul>
                                <li><a href="https://learn.sparkfun.com/tutorials/what-is-a-circuit">https://learn.sparkfun.com/tutorials/what-is-a-circuit</a></li>
                                <li><a href="https://123d.circuits.io">https://123d.circuits.io</a></li>
                            </ul>
                        </li>
                    </ul>
                    <aside class="notes">
                        <p>Sparkfun link - Gives info on circuits & electrical theory</p>
                        <p>circuits.io - You can create online models of circuits & sketches without doing the hardware, test first!</p>
                    </aside>
                </section>

                <section>
                    <h2>Two Projects</h2>
                    <ul>
                        <li>Send real life information to the internet</li>
                        <li>Use a webpage to control an Arduino unit</li>
                    </ul>
                </section>

                <section>
                    <h2>First Project - Temperature logger</h2>
                    <img src="img/redboard.jpg" class="parts">
                    <img src="img/sparkfun8266.jpg" class="parts">
                    <img src="img/headerPins.jpg" class="parts" />
                    <img src="img/tmpSensor.jpg" class="parts" />

                    <aside class="notes">
                        <p>Sending info from arduino to web.</p>

                        <p>Using Sparkfun Redboard - very similar to Arduino UNO. Pretty standard “first board”</p>
                        <p>ESP6266 Wifi Shield - shields are add on modules that plug into the arduino board and expand it’s capabilities.</p>

                        <p>Solder on some header pins, and it connects to the Redboard</p>

                        <p>Temperature sensor</p>
                    </aside>
                </section>

                <section>
                    <h2>Hundreds of Sensors!</h2>
                    <ul style="float:left">
                        <li>Temperature</li>
                        <li>Humidity</li>
                        <li>Light</li>
                        <li>Accelerometer</li>
                        <li>Force</li>
                        <li>Flex</li>
                        <li>Sound</li>
                        <li>Motion</li>
                    </ul>
                    <ul class="float:right;">
                        <li>Magnetometer</li>
                        <li>Altitude</li>
                        <li>Proximity</li>
                        <li>Geiger Counter</li>
                        <li>Carbon monoxide</li>
                        <li>Heart Rate</li>
                        <li>Alcohol</li>
                    </ul>
                    <aside class="notes">
                        Read em all.

                        Can use any one, or many of these, the possibilities are endless.
                        OR just use them all, strap unit to your cat, and see what happens.

                        I am using temperature because it’s simple.
                    </aside>
                </section>

                <section>
                    <img src="img/drunkcat.jpg">
                </section>

                <section>
                    <h2>Hardware Steps</h2>
                    <ul>
                        <li>Solder female header pins to WiFi Shield</li>
                        <li>Attach Shield to Arduino Unit</li>
                        <li>Create the circuit for the temperature sensor</li>
                    </ul>
                    <aside class="notes">
                        <p>Solder notes - not going to give instructions on how to do this. It’s easy as long as  you actually follow instructions online. My first solder job was done with solder without rosin core, which means that the solder doesn’t flow or stick to anything. After an hour or so I got it to work, but it was awful looking and easy to break. Second time with right materials, the job was about 10 minutes, and the finished product will hold up over time. ANOTHER NOTE - make sure you put them in the right side up. :)</p>
                    </aside>
                </section>
                <section>
                    <img src="img/tempAttached.jpg">
                    <aside class="notes">After solder & attached redboard to esp8266</aside>
                </section>
                <section>
                    <img src="img/tempCircuit.jpg">
                    <aside class="notes">Circuit. </aside>
                </section>
                <section>
                    <h2>Arduino Software Steps</h2>
                    <ul>
                        <li>Create a new Sketch</li>
                        <li>Include two libraries - SoftwareSerial <small>(<a href="https://github.com/arduino/Arduino/tree/master/hardware/arduino/avr/libraries/SoftwareSerial">https://github.com/arduino/Arduino/tree/master/hardware/arduino/avr/libraries/SoftwareSerial</a>)</small> & SparkFunESP8266WiFi <small>(<a href="https://github.com/sparkfun/SparkFun_ESP8266_AT_Arduino_Library">https://github.com/sparkfun/SparkFun_ESP8266_AT_Arduino_Library</a>)</small></li>
                        <li>We will be using the TCP Client portion of the SparkFunESP8266Wifi Library</li>
                    </ul>
                    <aside class="notes">
                        <p>SoftwareSerial library does :  SoftwareSerial library has been developed to allow serial communication on other digital pins of the Arduino</p>
                        <p>SparkFunESP8266Wifi : creates definitions to allow our WiFi Shield to work with the Arduino, including naming the correct pins that it connects, and setting up a simpler interface for using the WiFi Shield. Without this library, we would have to manually output AT commands, which are Attention Commands, used by modems, and other communication hardware to create TCP/UDP connections. These are not very user friendly.</p>
                    </aside>
                </section>
                <section>
                    <h2>Web Software Steps</h2>
                    <ul>
                        <li>Create a database & a database table for storing values</li>
                        <li>Add a field for temperature, and include timestamps</li>
                        <li>Complete handling of a post request on your website & add posted values to database</li>
                        <li>Create a separate page that will query results from the database and display them to a front end user.</li>
                    </ul>
                </section>
                <section>
                    <h2>C++ Algorithm</h2>
                    <ul>
                        <li>In the setup() method:
                            <ul>
                                <li>Ensure we are able to talk to the WiFi Module (ESP8266) and that it is operational</li>
                                <li>Connect the ESP8266 to the network via my home WiFi connection</li>
                            </ul>
                        </li>
                        <li>In the loop() method:
                            <ul>
                                <li>Get the voltage from our temperature sensor, convert it to degrees Celcius</li>
                                <li>Connect to the destination server (sarahetter.com)</li>
                                <li>Send an HTTP POST request with the temperature</li>
                                <li>Delay for about a minute</li>
                            </ul>
                        </li>
                    </ul>
                </section>
                <section>
                    <h2>Program Outline</h2>
                    <pre><code class="hljs cpp">
void setup() {
initializeESP8266();
connectESP8266();
}
void loop() {
postTemperature();
delay(60000);
}
void initializeESP8266() {}
void connectESP8266() {}
void postTemperature() {}
float getTemperatureFromPin() {}
                    </code></pre>
                </section>
                <section>
                    <h2 style="text-transform: none">postTemperature()</h2>
                    <pre><code class="hljs cpp">
float degreesC;
int connectRetVal;

ESP8266Client client;

degreesC = getTemperatureFromPin(A0);
connectRetVal = client.connect(“sarahetter.com”, 80);

if (connectRetVal <= 0) {
    Serial.println(F("Failed to connect to server."));
    return;
}
                    </code></pre>
                    <aside class="notes">
                        // Connecting to sarahetter.com on port 80
                        // Returns: 1 on success, 2 on already connected,
                        // negative on fail (-1=TIMEOUT, -3=FAIL).
                    </aside>
                </section>
                <section>
                    <h2 style="text-transform: none">postTemperature() continued</h2>
                    <pre><code class="hljs cpp">
String data = "temp1="+String(degreesC);
client.println("POST /arduino/add.php HTTP/1.1");
client.println("Host: sarahetter.com");
client.println("Content-Type: application/x-www-form-urlencoded");
client.print("Content-Length: ");
client.println(data.length());
client.println();
client.print(data);
                    </code></pre>
                </section>
                <section>
                    <h2>HTTP POST request</h2>
                    <pre>
POST /arduino/add.php HTTP/1.1
Host: sarahetter.com
Content-Type: application/x-www-form-urlencoded
Content-Length: 8

temp1=22
                    </pre>
                </section>
                <section>
                    <h2>Compile & Flash</h2>
                    <ul>
                        <li>Arduino will start running immediately after uploading program.</li>
                        <li>Check website after a few minutes, and your values will be displayed there.</li>
                    </ul>

                    <aside class="notes">
                        http://sarahetter.com/arduino/

                        <p>Talk about how easy this is. Different modules may make it harder, but because the library is there, the amount
                        of work we have to do is very minimal. </p>
                    </aside>
                </section>

                <section>
                    <h2>Turn on a light remotely</h2>
                    <img src="img/photonRedboard.jpg" class="parts">
                    <img src="img/led.gif" class="parts">
                    <aside class="notes">
                        <p>Next Project!</p>

                        <p>Using a different board - photon redboard. - cloud connected board that has wifi capabilities.</p>
                        <p>Uses an API from particle.io. Cloud based IoT. Very little coding needed. Just need to post to their API & it does things for you!</p>

                        <p>Proof of concept - since you can turn on an LED, you can turn on ANYTHING - a motor, a servo, a buzzer, a camera, or control a relay for larger electronics.</p>
                    </aside>
                </section>

                <section>
                    <h2>Hardware Setup</h2>
                    <ul>
                        <li>Plug in Photon Redboard to power</li>
                        <li>Download the “Particle” app</li>
                        <li>Follow instructions on screen</li>
                        <li>Set up circuit with LED</li>
                    </ul>
                    <aside class="notes">
                        Particle app connects device to the cloud, configures with your wifi connection
                    </aside>
                </section>

                <section>
                    <img src="img/particleapp.png" style="height:500px">
                </section>

                <section>
                    <img src="img/particleWithDevices.png" style="height:500px">
                </section>

                <section>
                    <img src="img/photonCircuit.jpg">
                    <aside class="notes">
                        Positive side to pin, negative side to resistor, to ground.
                        <p>Resistor lowers current flow, and in such, reducing voltage delivered.</p>
                    </aside>
                </section>

                <section>
                    <h2>Software Setup</h2>
                    <ul>
                        <li>Online IDE - https://build.particle.io/</li>
                        <li>Compile & flash</li>
                        <li>Map a function in the setup()
                            <ul>
                                <li>Spark.function("led", ledToggle);</li>
                            </ul>
                        </li>
                        <li>Leave loop empty</li>
                    </ul>
                    <aside class="notes">Explain the mapping here</aside>
                </section>

                <section>
                    <img src="img/particleioIDE.png">
                    <aside class="notes">
                        <p>Do all of the coding, compiling and flashing online!</p>
                        <p>Click on checkmark on side to compile, and lightning bolt to flash to your board. Your board only needs to be powered on, and connected to the wireless network you configured.</p>
                    </aside>
                </section>

                <section>
                    <pre><code class="hljs cpp">
void setup() {
    pinMode(D3, OUTPUT);

    Spark.function("led",ledToggle);

    digitalWrite(D3, LOW);
}
                    </code></pre>
                    <aside class="notes">
                        <p>Set pinmode to output</p>
                        <p>Map the function ledToggle to the api key led</p>
                        <p>For good measure, make sure the LED is off</p>
                    </aside>
                </section>

                <section>
                    <pre><code class="hljs cpp">
int ledToggle(String command) {
    if (command=="on") {
        digitalWrite(led1,HIGH);
        return 1;
    }
    else if (command=="off") {
        digitalWrite(led1,LOW);
        return 0;
    }
    else {
        return -1;
    }
}
                    </code></pre>

                    <aside class="notes">
                        The string that gets passed in (command) is the value of the input selected on our webform
                    </aside>
                </section>

                <section>
                    <h2>Website side</h2>
                    <ul>
                        <li>Create a form with the action:</li>
                         <ul><li>https://api.particle.io/v1/devices/*** DEVICE ID***/<span class="highlight-red">led</span>?access_token=*** ACCESS TOKEN ***</li></ul>
                        <li>Set the input names to “args”</li>
                        <li>Set the input values to the strings to be sent to the API</li>
                        <li><span class="highlight-red">led</span> is the name that we mapped to our ledToggle() function</li>
                    </ul>
                    <aside class="notes">
                        <p>Device ID is available in the online IDE by clicking on the “Devices” Icon in the left sidebar</p>
                        <p>Access Token is available in the online IDE by clicking on the “Settings” Icon in the left sidebar</p>

                        <p>On form send, the app will iterate through the string comparisons, find the right one, and do the command (turning on/ off led) that we gave it.</p>
                    </aside>
                </section>

                <section>
                    <pre><code class="hljs html">
<form action="https://api.particle.io/v1/devices/*** DEVICE ID***
/led?access_token=*** ACCESS TOKEN ***" method="POST">
    <input type="radio" name="args" value="on">Turn the LED on.
    <br>
    <input type="radio" name="args" value="off">Turn the LED off.
    <br>
    <br>
    <input type="submit" value="Do it!">
</form>
                    </code></pre>
                    <aside class="notes">
                        http://sarahetter.com/toggleLED.html
                    </aside>
                </section>

                <section>
                    <h2>Security!</h2>
                    <ul>
                        <li>Password protect any output page</li>
                        <li>Sanitize Inputs</li>
                        <li>Sanitize Inputs</li>
                        <li>Sanitize Inputs</li>
                        <li>Public/Private Key system in HTTP header</li>
                    </ul>
                    <aside class="notes">
                        Lists of children webcams exist.
                        <p>htpasswd, or in your software itself</p>
                    </aside>
                </section>

                <section>
                    <h2>Questions?</h2>
                </section>



			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
